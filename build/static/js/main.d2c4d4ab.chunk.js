(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),r=(t(20),t(6)),u=t(3),o=t(1),i=t(4),s=t.n(i),d="/api/persons",l=function(){return s.a.get(d).then((function(e){return e.data}))},j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),m=function(e){var n=e.text;return Object(f.jsx)("h2",{children:n})},O=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.handleNumberChange,a=e.name,r=e.number;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{onChange:t,value:a})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{onChange:c,value:r})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.handleFilterChange,t=e.value;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{onChange:n,value:t})]})},x=function(e){var n=e.person,t=e.handleDelete;return Object(f.jsxs)("div",{children:[n.name," ",n.number,Object(f.jsx)("button",{onClick:t,children:"delete"})]})},p=function(e){var n=e.type,t=e.message;return null===t?null:Object(f.jsx)("div",{className:1===n?"success":"error",children:t})},g=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),i=Object(u.a)(a,2),s=i[0],d=i[1],g=Object(o.useState)(""),w=Object(u.a)(g,2),C=w[0],y=w[1],k=Object(o.useState)(""),N=Object(u.a)(k,2),S=N[0],D=N[1],P=Object(o.useState)(null),E=Object(u.a)(P,2),F=E[0],J=E[1],L=Object(o.useState)(0),A=Object(u.a)(L,2),B=A[0],I=A[1];Object(o.useEffect)((function(){l().then((function(e){c(e)}))}),[]);var T=function(e){h(e.id,e).then((function(n){c(t.map((function(e){return e.id!==n.id?e:n})));var a="".concat(e.name," updated successfully!");q(1,a)})).catch((function(n){var a="".concat(e.name," was already deleted from the server");q(2,a),c(t.filter((function(n){return n.id!==e.id})))}))},q=function(e,n){I(e),J(n),setTimeout((function(){I(0),J(null)}),5e3)},z=""===S?t:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)(m,{text:"Phonebook"}),Object(f.jsx)(p,{message:F,type:B}),Object(f.jsx)(v,{handleFilterChange:function(e){D(e.target.value)},value:S}),Object(f.jsx)(m,{text:"Add New"}),Object(f.jsx)(O,{addPerson:function(e){e.preventDefault();var n={name:s,number:C},a=t.find((function(e){return e.name===n.name}));if(a){window.confirm("".concat(s," is already in the phonebook, replace the old number with a new one?"));var u=Object(r.a)(Object(r.a)({},a),{},{number:C});T(u),d(""),y("")}else j(n).then((function(e){c(t.concat(e));var n="".concat(e.name," created successfully!");q(1,n),d(""),y("")}))},handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){y(e.target.value)},name:s,number:C}),Object(f.jsx)(m,{text:"Numbers"}),z.map((function(e){return Object(f.jsx)(x,{person:e,handleDelete:function(){return n=e,window.confirm("Delete ".concat(n.name," ?")),void b(n.id).then(c(t.filter((function(e){return e.id!==n.id}))));var n}},e.name)}))]})};a.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d2c4d4ab.chunk.js.map