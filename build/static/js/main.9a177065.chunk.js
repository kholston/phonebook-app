(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),r=(t(20),t(6)),u=t(3),o=t(1),i=t(4),s=t.n(i),d="/api/persons",j=function(){return s.a.get(d).then((function(e){return e.data}))},l=function(e){return s.a.post(d,e).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=t(0),m=function(e){var n=e.text;return Object(h.jsx)("h2",{children:n})},O=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.handleNumberChange,a=e.name,r=e.number;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{onChange:t,value:a})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{onChange:c,value:r})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.handleFilterChange,t=e.value;return Object(h.jsxs)("div",{children:["filter shown with ",Object(h.jsx)("input",{onChange:n,value:t})]})},x=function(e){var n=e.person,t=e.handleDelete;return Object(h.jsxs)("div",{children:[n.name," ",n.number,Object(h.jsx)("button",{onClick:t,children:"delete"})]})},p=function(e){var n=e.type,t=e.message;return null===t?null:Object(h.jsx)("div",{className:1===n?"success":"error",children:t})},g=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),i=Object(u.a)(a,2),s=i[0],d=i[1],g=Object(o.useState)(""),w=Object(u.a)(g,2),C=w[0],y=w[1],k=Object(o.useState)(""),N=Object(u.a)(k,2),S=N[0],D=N[1],P=Object(o.useState)(null),E=Object(u.a)(P,2),F=E[0],J=E[1],L=Object(o.useState)(0),A=Object(u.a)(L,2),B=A[0],I=A[1];Object(o.useEffect)((function(){j().then((function(e){c(e)}))}),[]);var T=function(){d(""),y("")},q=function(e,n){I(e),J(n),setTimeout((function(){I(0),J(null)}),5e3)},z=""===S?t:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(h.jsxs)("div",{children:[Object(h.jsx)(m,{text:"Phonebook"}),Object(h.jsx)(p,{message:F,type:B}),Object(h.jsx)(v,{handleFilterChange:function(e){D(e.target.value)},value:S}),Object(h.jsx)(m,{text:"Add New"}),Object(h.jsx)(O,{addPerson:function(e){e.preventDefault();var n,a={name:s,number:C},u=t.find((function(e){return e.name===a.name}));if(u){if(window.confirm("".concat(a.name," is already in the phonebook. Do you want to update the entry?"))){var o=Object(r.a)(Object(r.a)({},u),{},{number:a.number});f((n=o).id,n).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e})));var a="".concat(n.name," updated successfully!");q(1,a),T()})).catch((function(e){var a="".concat(n.name," was already deleted from the server");q(2,a),c(t.filter((function(e){return e.id!==n.id}))),T()}))}}else l(a).then((function(e){c(t.concat(e));var n="".concat(e.name," created successfully!");q(1,n),T()}))},handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){y(e.target.value)},name:s,number:C}),Object(h.jsx)(m,{text:"Numbers"}),z.map((function(e){return Object(h.jsx)(x,{person:e,handleDelete:function(){return n=e,void(window.confirm("Delete ".concat(n.name," ?"))&&b(n.id).then(c(t.filter((function(e){return e.id!==n.id})))));var n}},e.name)}))]})};a.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9a177065.chunk.js.map